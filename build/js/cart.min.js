function loadCart(){var t=[];for(var a in cart)t.push(a);function o(){var t=$(this).attr("data-id");delete cart[t],localStorage.setItem("cart",JSON.stringify(cart)),showCountGoodsCart(),loadCart()}function r(){var t=$(this).attr("data-id");cart[t]++,localStorage.setItem("cart",JSON.stringify(cart)),showCountGoodsCart(),loadCart()}function c(){var t=$(this).attr("data-id");cart[t]>1&&cart[t]--,localStorage.setItem("cart",JSON.stringify(cart)),showCountGoodsCart(),loadCart()}fetch("http://localhost:0080/shop/allById",{method:"POST",cache:"force-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{console.log(t);var a="",s=0;for(var e in t)a+='<div class="cart__goods-cart">',a+='<div class="cart__img-wrap">',null==t[e].image?a+='<img src="goods.jpg" alt="изображение товара">':a+='<img src="'+t[e].image+'" alt="изображение товара">',a+="</div>",a+='<div class="cart__text-wrap">',a+='<p class="cart__name">'+t[e].name+"</p>",a+='<p class="cart__count text">Цена: '+t[e].cost+" руб.<br>Количество:</p>",a+='<div class="cart__count-button"><button class="minus" data-id="'+t[e].id+'">-</button>'+cart[t[e].id]+'<button class="plus" data-id="'+t[e].id+'">+</button></div>',a+="</div>",a+='<a href="#" class="del-goods" data-id="'+t[e].id+'"><span class="cart__trash"></span></a>',a+="</div>",s+=t[e].cost*cart[t[e].id];""==a?(a+="Корзина пуста",$(".cart-wrap").html(""),$(".cart-null").html(a)):($(".cart-wrap").html(a),$(".cart-null").html("")),s+=" руб.",$(".payment__total-sum").html(s),$(".del-goods").on("click",o),$(".plus").on("click",r),$(".minus").on("click",c)})),$(".create-order__form").submit((function(t){t.preventDefault();const a=t.target,o=new FormData(a);var r={name:o.get("name"),surname:o.get("surname"),phoneNumber:o.get("phoneNumber"),address:o.get("address"),description:o.get("description"),cart:cart};console.log(JSON.stringify(r)),fetch("http://localhost:0080/shop/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((t=>t.text())).then((t=>{console.log("возврат"),console.log(t)})),cart={},localStorage.setItem("cart",JSON.stringify(cart)),showCountGoodsCart(),loadCart(),alert("Заявка оставлена, ожидайте звонка оператора! :)")}))}$("document").ready((function(){loadCart()}));