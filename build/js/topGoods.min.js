var cart={};function loadGoods(){$.getJSON("js/goods.json",(function(a){var o="";for(var s in a)o+='<div class="goods">',o+='<a href="#goods-desc" class="open-desc" data-art="'+s+'">',o+='<div class="goods__image"><img src="'+a[s].image+'" alt="image goods"></div>',o+="</a>",o+='<div class="goods__text">',o+='<a href="#goods-desc" class="open-desc" data-art="'+s+'">'+a[s].name+"</a>",o+="<hr>",o+="<p>"+a[s].cost+"руб</p>",o+="</div>",o+="</div>";$(".top-goods__row").html(o),$(".open-desc").on("click",openDesc)}))}function openDesc(){var a=$(this).attr("data-art");$.getJSON("js/goods.json",(function(o){var s="";for(var t in o)if(t==a){s+='<a href="##" class="modal-close"></a>',s+='<section class="goods-desc">',s+='<div class="goods-desc__image-wrap">',s+='<img src="'+o[t].image+'" alt="">',s+="</div>",s+='<div class="goods-desc__desc">',s+='<p class="subtitle">'+o[t].name+"</p>",s+="<hr>",s+='<p class="text">'+o[t].description+"</p>",s+='<p class="goods-desc__price">'+o[t].cost+"</p>",s+='<button class="goods-desc__add-to-cart" data-art="'+t+'">В корзину</button>',s+="</div>",s+="</section>";break}$(".modal-container").html(s),$(".goods-desc__add-to-cart").on("click",addToCart)}))}function addToCart(){var a=$(this).attr("data-art");null!=cart[a]?cart[a]++:cart[a]=1,localStorage.setItem("cart",JSON.stringify(cart)),showCountGoodsCart()}function checkCart(){var a=localStorage.getItem("cart");null!=a&&(cart=JSON.parse(a))}function showCountGoodsCart(){var a=0;for(var o in cart)a+=cart[o];$(".menu__basket").html(a)}$("document").ready((function(){loadGoods(),checkCart(),showCountGoodsCart()}));